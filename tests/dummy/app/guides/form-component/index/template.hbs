<div class="w-4/5">
  <h1>ValidationForm</h1>
  <p>The ValidationForm component acts as a container for FormField components and collects their validations during form submission.</p>
  <p>The form outputs a data hash keyed by its fields' <code>name</code> properties.</p>
  <p>When the form submits, the <code>onSubmit</code> action is invoked yielding a hash of promises that hold the validation results of the fields.</p>
  {{#validation-form
    sync=true
    onSuccess=(action "submit")
    onReject=(action "reject")
    as |form|
  }}
    {{#each-in form.errors as |fieldName errors|}}
      {{#each errors as |error|}}
        <p class="m-0">{{error.message}}</p>
      {{/each}}
    {{/each-in}}
    <ul>
      <li>isvalidating: {{form.isValidating}}</li>
      <li>success: {{form.didSucceed}}</li>
      <li>reject: {{form.didReject}}</li>
      <li>didsubmit: {{form.didSubmit}}</li>
      <li>timing: {{form.validationTiming}}</li>
    </ul>
    {{#text-field
      validationMessages=(hash
        required="username is required"
      )
      name="username"
      parent=form
      required=true
      value=formData.username
      as |field|
    }}
      <input
        type="text"
        placeholder="username"
        oninput={{action (mut formData.username) value="target.value"}}
        value={{formData.username}}
      > * required
      {{#each field.errorMessages as |error|}}
        <p class="text-red">{{error}}</p>
      {{/each}}
    {{/text-field}}
    {{#number-field
      validationMessages=(hash
        required="age is required"
      )
      name="age"
      parent=form
      integer=true
      positive=true
      required=true
      value=formData.age
      as |field|
    }}
      <input
        type="text"
        placeholder="age"
        oninput={{action (mut formData.age) value="target.value"}}
        value={{formData.age}}
      > * required
      {{#each field.errorMessages as |error|}}
        <p class="text-red">{{error}}</p>
      {{/each}}
    {{/number-field}}
    {{#text-field
      parent=form
      name="validationFormEmail"
      value=formData.email
      type="email"
      as |field|
    }}
      <input
        placeholder="email"
        type="text"
        value={{formData.email}}
        oninput={{action (mut formData.email) value="target.value"}}
      >
      {{#each field.errorMessages as |error|}}
        <p class="text-red">{{error}}</p>
      {{/each}}
    {{/text-field}}

    {{#if validationFormSuccessData}}
      <div class="my-4">
        success! {{validationFormSuccessData}}
      </div>
    {{/if}}
    <button type="submit">validate</button>
  {{/validation-form}}
  {{outlet}}
</div>

<h2>Properties</h2>

{{#each properties as |prop|}}
  <section class="mb-10">
    <h3>{{prop.name}} <small class="font-normal text-sm">{{prop.type}}</small></h3>
    <p>{{markdown-to-html prop.description class="markdown"}}</p>

    {{#if prop.enums.length}}
      <div class="">
        One of:
        {{#each option.enums as |enum|}}
          <span>{{enum}}</span>
        {{/each}}
      </div>
    {{/if}}

    {{#if prop.defaultValue}}
      <p>defaultValue: {{prop.defaultValue}}</p>
    {{/if}}
  </section>
{{/each}}

<h3>Validation Options</h3>

{{#each validationOptions as |option|}}
  <section class="mb-10">
    <h4>{{option.name}} <small class="font-normal text-sm">{{option.type}}</small></h4>
    <p>{{markdown-to-html option.description class="markdown"}}</p>

    {{#if option.enums.length}}
      <div class="">
        One of:
        {{#each option.enums as |enum|}}
          <span>{{enum}}</span>
        {{/each}}
      </div>
    {{/if}}

    {{#if option.defaultValue}}
      <p>defaultValue: {{option.defaultValue}}</p>
    {{/if}}
  </section>
{{/each}}

<h3>Private properties</h3>

{{#each privateProps as |prop|}}
  <section class="mb-10">
    <h4>{{prop.name}} <small class="font-normal text-sm">{{prop.type}}</small></h4>
    <p>{{markdown-to-html prop.description class="markdown"}}</p>

    {{#if prop.enums.length}}
      <div class="">
        One of:
        {{#each prop.enums as |enum|}}
          <span>{{enum}}</span>
        {{/each}}
      </div>
    {{/if}}

    {{#if prop.defaultValue}}
      <p>defaultValue: {{prop.defaultValue}}</p>
    {{/if}}
  </section>
{{/each}}

<h2>Functions</h2>

{{#each functions as |prop|}}
  <section class="mb-10">
    <h4>{{prop.name}} <small class="font-normal text-sm">{{prop.type}}</small></h4>
    <p>{{markdown-to-html prop.description class="markdown"}}</p>

    {{#if prop.enums.length}}
      <div class="">
        One of:
        {{#each option.enums as |enum|}}
          <span>{{enum}}</span>
        {{/each}}
      </div>
    {{/if}}

    {{#if prop.defaultValue}}
      <p>defaultValue: {{prop.defaultValue}}</p>
    {{/if}}
  </section>
{{/each}}

{{#each privateFuncs as |prop|}}
  <section class="mb-10">
    <h4>{{prop.name}} <small class="font-normal text-sm">{{prop.type}}</small></h4>
    <p>{{markdown-to-html prop.description class="markdown"}}</p>

    {{#if prop.enums.length}}
      <div class="">
        One of:
        {{#each option.enums as |enum|}}
          <span>{{enum}}</span>
        {{/each}}
      </div>
    {{/if}}

    {{#if prop.defaultValue}}
      <p>defaultValue: {{prop.defaultValue}}</p>
    {{/if}}
  </section>
{{/each}}
